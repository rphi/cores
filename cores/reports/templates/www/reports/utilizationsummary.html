{% extends 'www/_base.html' %}
{% load static %}
{% load bootstrap4 %}
{% load percentage %}

{% block content %}
<div class="container">
    <h2>Utilization report</h2>
    <h5>Data based off the last 90 days of bookings. (doesn't include reserved hosts)</h5>

    <div class="row">
        <div class="col-md card p-2 mx-1">
            <h4>Hardware types</h4>
            <table class="table">
                <thead>
                    <tr>
                    <th scope="col">Type</th>
                    <th scope="col">% Utilization</th>
                    </tr>
                </thead>
                <tbody>
                    {% for h, value in hardwares %}
                    <tr>
                    <td>{{h}}</td>
                    <td>{{value | percentage}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="col-md card p-2 mx-1">
            <h4>Labs</h4>
            <table class="table">
                <thead>
                    <tr>
                    <th scope="col">Lab</th>
                    <th scope="col">% Utilization</th>
                    </tr>
                </thead>
                <tbody>
                    {% for l, value in labs %}
                    <tr>
                    <td>{{l}}</td>
                    <td>{{value | percentage}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="col-md card p-2 mx-1">
            <h4>User hours</h4>
            <table class="table">
                <thead>
                    <tr>
                    <th scope="col">User</th>
                    <th scope="col">Total booked time</th>
                    </tr>
                </thead>
                <tbody>
                    {% for u, value in userhours %}
                    <tr>
                    <td>{{u}}</td>
                    <td>{{value}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    
    <br/>

    <h4>Hosts</h4>
    <table class="table">
        <thead>
            <tr>
            <th scope="col">Hostname</th>
            <th scope="col">Hardware</th>
            <th scope="col">Location</th>
            <th scope="col">Group</th>
            <th scope="col">Owner</th>
            <th scope="col">Biggest user</th>
            <th scope="col">Booking count</th>
            <th scope="col">Utilization</th>
            </tr>
        </thead>
        <tbody>
            {% for h in hosts %}
            <tr>
            <td>{{h.hostname}}</td>
            <td>{{h.hardware}}</td>
            <td>{{h.location}}</td>
            <td>{{h.group}}</td>
            <td>{{h.owner}}</td>
            <td>{{h.biggestuser}}</td>
            <td>{{h.bookings}}</td>
            <td>{{h.utilization | percentage}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    
</div>
{% endblock %}